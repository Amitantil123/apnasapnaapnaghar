<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Apna Sapna Apna Ghar</title>
  <style>
    /* ‡§µ‡§π‡•Ä ‡§Ü‡§™‡§ï‡§æ ‡§™‡•Å‡§∞‡§æ‡§®‡§æ CSS - ‡§ï‡•ã‡§à ‡§¨‡§¶‡§≤‡§æ‡§µ ‡§®‡§π‡•Ä‡§Ç */
    body { margin: 0; font-family: Arial, sans-serif; background: #f4f4f4; }
    .welcome { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; display: flex; align-items: center; justify-content: center; z-index: 10; }
    .welcome img { max-width: 80%; border-radius: 10px; }
    header { background: #007bff; color: #fff; padding: 10px; display: flex; align-items: center; justify-content: space-between; }
    header img { height: 40px; }
    #searchBar { display: flex; gap: 5px; padding: 10px; background: #e9ecef; }
    #searchBar input { flex: 1; padding: 8px; border: 1px solid #ccc; border-radius: 4px; }
    #searchBar button { padding: 8px 12px; background: #007bff; color: #fff; border: none; border-radius: 4px; }
    .container { padding: 15px; }
    .section { display: none; }
    .property-list { background: #fff; padding: 10px; margin: 10px 0; border-radius: 6px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
    .property-list img { width: 100%; border-radius: 6px; }
    form input, form textarea { width: 100%; padding: 8px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 4px; }
    form button { background: #28a745; color: #fff; padding: 10px; border: none; border-radius: 6px; cursor: pointer; }
    .nav { position: fixed; bottom: 0; width: 100%; display: flex; background: #fff; border-top: 1px solid #ccc; }
    .nav button { flex: 1; padding: 10px; border: none; background: #fff; color: #007bff; font-size: 14px; }
    .account-options { background: #fff; padding: 10px; border-radius: 6px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
    .account-options div { margin: 5px 0; padding: 6px; background: #f1f1f1; border-radius: 4px; cursor: pointer; }
    .account-dp { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; }
    .account-dp img { width: 60px; height: 60px; border-radius: 50%; }
    .sub-options { margin-left: 15px; }
    .top-actions { display: flex; justify-content: flex-end; gap: 10px; padding: 5px 10px; }
    .top-actions button { padding: 5px 8px; font-size: 12px; background: #007bff; color: #fff; border: none; border-radius: 4px; }
    .trusted-line { background: #e0ffe0; padding: 10px; border-radius: 6px; color: #2e7d32; font-weight: bold; text-align: center; margin-top: 10px; }
  </style>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
</head>
<body>

<div class="welcome" id="welcomeScreen">
  <img src="welcome.jpg" alt="Welcome">
</div>

<header>
  <img src="logo.png" alt="Logo">
  <strong>Apna Sapna Apna Ghar</strong>
</header>

<div class="top-actions">
  <button onclick="showMyAds()">üìÇ My Ads</button>
  <button onclick="showPropertyList()">üìã Property List</button>
</div>

<div id="searchBar">
  <input type="text" id="locationInput" placeholder="Search location...">
  <button onclick="searchLocation()">Search</button>
</div>

<div class="container section" id="homeSection">
  <div class="property-list"><img src="property1.jpg" alt="Property 1"></div>
  <div class="property-list"><img src="property2.jpg" alt="Property 2"></div>
</div>

<div class="container section" id="sellSection">
  <h3>‚ûï Sell Property</h3>
  <form id="sellForm">
    <input type="file" multiple>
    <input type="text" placeholder="Property Name" required>
    <input type="text" placeholder="Location" required>
    <input type="number" placeholder="Price" required>
    <textarea placeholder="Description" required></textarea>
    <input type="text" placeholder="Owner Name" required>
    <input type="text" placeholder="Features (e.g. 3BHK, Garden)">
    <button type="submit">Submit</button>
  </form>
</div>

<div class="container section" id="accountSection">
  <div class="account-options">
    <div class="account-dp">
      <img src="dp.png" alt="DP">
      <div>
        <strong id="userStatus">Guest</strong>
        <div style="font-size: 12px; color: gray;">View & Edit Profile</div>
      </div>
    </div>
    <div onclick="showLogin()">üë§ Login</div>
    <div onclick="logout()">üö™ Logout</div>
    <div onclick="showSignup()">‚ûï Create Account</div>
    <div onclick="editProfile()">‚úèÔ∏è Edit Profile</div>
    <div onclick="saveProfile()">üíæ Save Profile</div>
    <div id="profileForm" style="display:none;">
      <input type="text" id="profileAddress" placeholder="Address">
      <input type="date" id="profileDOB" placeholder="DOB">
      <input type="text" id="profilePin" placeholder="PIN Code">
      <input type="text" id="profileState" placeholder="State">
      <input type="email" id="profileEmail" placeholder="Email Address">
    </div>
  </div>
</div>

<div class="nav">
  <button onclick="showSection('homeSection')">üè† Home</button>
  <button onclick="showSection('sellSection')">‚ûï Sell</button>
  <button onclick="showSection('aboutSection')">‚ÑπÔ∏è About</button>
  <button onclick="showSection('accountSection')">üë§ Account</button>
</div>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyBOTWxvWiESaz1EK9mpRFerPeTBH5e8p0c",
  authDomain: "apnasapnaapnaghar-3ef02.firebaseapp.com",
  projectId: "apnasapnaapnaghar-3ef02",
  storageBucket: "apnasapnaapnaghar-3ef02.appspot.com",
  messagingSenderId: "664489681158",
  appId: "1:664489681158:web:f7cbfa996d78b52236fe87",
};

firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();

window.onload = function() {
  setTimeout(() => {
    document.getElementById('welcomeScreen').style.display = 'none';
    showSection('homeSection');
  }, 3000);

  auth.onAuthStateChanged(user => {
    if (user) {
      document.getElementById('userStatus').innerText = user.email;
      loadProfile(user.uid);
    } else {
      document.getElementById('userStatus').innerText = "Guest";
    }
  });
}

function showSection(id) {
  document.querySelectorAll('.section').forEach(sec => sec.style.display = 'none');
  document.getElementById(id).style.display = 'block';
}

function searchLocation() {
  const val = document.getElementById('locationInput').value;
  alert(val ? `Searching for properties in: ${val}` : 'Please enter a location');
}

function showMyAds() {
  alert("Showing your ads...");
  showSection('sellSection');
}

function showPropertyList() {
  alert("Showing property list...");
  showSection('homeSection');
}

document.getElementById('sellForm').addEventListener('submit', e => {
  e.preventDefault();
  alert('Property submitted successfully!');
});

function showLogin() {
  const email = prompt("Enter email:");
  const password = prompt("Enter password:");
  if(email && password) {
    auth.signInWithEmailAndPassword(email, password)
    .then(() => alert("Logged in!"))
    .catch(err => alert(err.message));
  }
}

function showSignup() {
  const email = prompt("Enter email:");
  const password = prompt("Enter password:");
  if(email && password) {
    auth.createUserWithEmailAndPassword(email, password)
    .then(() => alert("Account created!"))
    .catch(err => alert(err.message));
  }
}

function logout() {
  auth.signOut().then(() => alert("Logged out!"));
}

function editProfile() {
  document.getElementById('profileForm').style.display = 'block';
}

function saveProfile() {
  const user = auth.currentUser;
  if (user) {
    const data = {
      address: document.getElementById('profileAddress').value,
      dob: document.getElementById('profileDOB').value,
      pin: document.getElementById('profilePin').value,
      state: document.getElementById('profileState').value,
      email: document.getElementById('profileEmail').value
    };
    db.collection('profiles').doc(user.uid).set(data).then(() => {
      alert("Profile saved!");
      document.getElementById('profileForm').style.display = 'none';
    });
  } else {
    alert("Please login first!");
  }
}

function loadProfile(uid) {
  db.collection('profiles').doc(uid).get().then(doc => {
    if(doc.exists) {
      const data = doc.data();
      document.getElementById('profileAddress').value = data.address || '';
      document.getElementById('profileDOB').value = data.dob || '';
      document.getElementById('profilePin').value = data.pin || '';
      document.getElementById('profileState').value = data.state || '';
      document.getElementById('profileEmail').value = data.email || '';
    }
  });
}
</script>

</body>
</html>
